<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>web 13 lectura de xml 2</title>
</head>
<body>
    
    <h1>Consumiendo xml departamentos</h1>

    <button id="cargar">Cargar departamentos</button>

    <table id="tablaDepartamentos" border>

        <thead>

            <tr>

                <th>NÃºmero</th>
                <th>Nombre</th>
                <th>Localidad</th>

            </tr>

        </thead>

        <tbody></tbody>

    </table>

<script src="js/jquery-3.7.1.min.js"></script>
<script>

    $(document).ready(function(){

        $("#cargar").click(function(){

            $.get("documents/departamentos.xml", function(data){

                //con esto sabemos si estamos acediendo al servicio
                console.log("Leyendo servicio...");

                var html = "";

                //necesitamos recuperar cada etiqueta DEPT
                $(data).find("DEPT").each(function(){

                    html += "<tr>";

                    var numero = $(this).attr("DEPT_NO");
                    var nombre = $(this).find("DNOMBRE").text();
                    var loc = $(this).find("LOC").text();

                    html += "<td>" + numero + "</td>";
                    html += "<td>" + nombre + "</td>";
                    html += "<td>" + loc + "</td>";

                    html += "</tr>";
                })

                $("#tablaDepartamentos tbody").html(html);

            })

        })
    })
</script>
</body>
</html>

